#!/bin/sh

if [ -f $HOME/.twmrc ]; then
    twm -f $HOME/.twmrc
else
    source /etc/xdm-xfreq/xdm-xfreq.rc

    if [ -d $USERTMPFS ]; then
	echo "*Foreground:"$FOREGROUND > $USERTMPFS/twm-xfreq.Xresources
	echo "*Background:"$BACKGROUND >> $USERTMPFS/twm-xfreq.Xresources
	echo "" >> $USERTMPFS/twm-xfreq.Xresources
	echo "Xmessage*borderWidth:1" >> $USERTMPFS/twm-xfreq.Xresources
	echo "Xmessage*Command.highlightThickness:1" >> $USERTMPFS/twm-xfreq.Xresources
	echo "Xmessage*Command.internalWidth:12" >> $USERTMPFS/twm-xfreq.Xresources
	echo "Xmessage*Command.internalHeight:4" >> $USERTMPFS/twm-xfreq.Xresources
	echo "Xmessage*Command.shapeStyle:rectangle" >> $USERTMPFS/twm-xfreq.Xresources
	echo "Xmessage*message.scrollVertical:never" >> $USERTMPFS/twm-xfreq.Xresources
	echo "Xmessage*message.scrollHorizontal:never" >> $USERTMPFS/twm-xfreq.Xresources
	echo "Xmessage*Text.borderWidth:0" >> $USERTMPFS/twm-xfreq.Xresources
	echo "" >> $USERTMPFS/twm-xfreq.Xresources
	echo "XTerm*vt100.allowBoldFonts:false" >> $USERTMPFS/twm-xfreq.Xresources

	xrdb -load $USERTMPFS/twm-xfreq.Xresources

	echo "AutoRaise { \"TWM Icon Manager\" \"Clock\" \"PopUp\" }" > $USERTMPFS/twm-xfreq.rc
	echo "BorderWidth 3" >> $USERTMPFS/twm-xfreq.rc
	echo "ButtonIndent 2" >> $USERTMPFS/twm-xfreq.rc
	echo "DecorateTransients" >> $USERTMPFS/twm-xfreq.rc
	echo "FramePadding 1" >> $USERTMPFS/twm-xfreq.rc
	echo "IconBorderWidth 1" >> $USERTMPFS/twm-xfreq.rc
	if [[ -v WMICONLIST ]]; then
		echo "DontIconifyByUnmapping { \"$WMICONLIST\" }" >> $USERTMPFS/twm-xfreq.rc
	else
		echo "IconifyByUnmapping" >> $USERTMPFS/twm-xfreq.rc
	fi
	echo "IconBorderWidth 1" >> $USERTMPFS/twm-xfreq.rc
	echo "IconDirectory \"/usr/share/icons\"" >> $USERTMPFS/twm-xfreq.rc
	echo "IconFont \"$WMICONFONT\"" >> $USERTMPFS/twm-xfreq.rc
	echo "IconRegion \"=160x$(( $HEIGHT - 64 ))+0+64\" North West 5 10" >> $USERTMPFS/twm-xfreq.rc
	echo "IconRegion \"=160x$(( $HEIGHT - 64 ))-0+64\" North East 5 10" >> $USERTMPFS/twm-xfreq.rc
	echo "IconManagerDontShow { \"Clock\" \"PopUp\" \"XFreq-Gui\" }" >> $USERTMPFS/twm-xfreq.rc
	echo "IconManagerGeometry \"$(( $WIDTH - 176 ))x32+0+0\" 16" >> $USERTMPFS/twm-xfreq.rc
	echo "IconManagerFont \"$WMICONFONT\"" >> $USERTMPFS/twm-xfreq.rc
	echo "NoGrabServer" >> $USERTMPFS/twm-xfreq.rc
	echo "NoHighlight" >> $USERTMPFS/twm-xfreq.rc
	echo "NoTitle { \"TWM Icon Manager\" \"Clock\" \"PopUp\" \"XFreq-Gui\" }" >> $USERTMPFS/twm-xfreq.rc
	echo "MenuBorderWidth 1" >> $USERTMPFS/twm-xfreq.rc
	echo "MenuFont \"$WMMENUFONT\"" >> $USERTMPFS/twm-xfreq.rc
	echo "OpaqueMove" >> $USERTMPFS/twm-xfreq.rc
	echo "RandomPlacement" >> $USERTMPFS/twm-xfreq.rc
	echo "ResizeFont \"$WMRESIZEFONT\"" >> $USERTMPFS/twm-xfreq.rc
	echo "RestartPreviousState" >> $USERTMPFS/twm-xfreq.rc
	echo "ShowIconManager" >> $USERTMPFS/twm-xfreq.rc
	echo "SqueezeTitle" >> $USERTMPFS/twm-xfreq.rc
	echo "TitleButtonBorderWidth 1" >> $USERTMPFS/twm-xfreq.rc
	echo "TitleFont \"$WMTITLEFONT\"" >> $USERTMPFS/twm-xfreq.rc
	echo "TitlePadding 8" >> $USERTMPFS/twm-xfreq.rc
	echo "" >> $USERTMPFS/twm-xfreq.rc
	echo "Color" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	echo "  BorderColor \"$WMBORDERCOLOR\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  {" >> $USERTMPFS/twm-xfreq.rc
	echo "    \"Clock\" \"$WMBORDERCLOCK\"" >> $USERTMPFS/twm-xfreq.rc
	echo "    \"PopUp\" \"$WMBORDERPOPUP\"" >> $USERTMPFS/twm-xfreq.rc
	echo "    \"TWM Icon Manager\" \"$WMBORDERTASKS\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  }" >> $USERTMPFS/twm-xfreq.rc
	echo "  BorderTileBackground \"$WMBORDERTILEBG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  BorderTileForeground \"$WMBORDERTILEFG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  DefaultBackground \"$WMDEFAULTBG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  DefaultForeground \"$WMDEFAULTFG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  TitleBackground \"$WMTITLEBG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  TitleForeground \"$WMTITLEFG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  MenuBackground \"$WMMENUBG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  MenuForeground \"$WMMENUFG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  MenuBorderColor \"$WMBORDERMENUBG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  MenuShadowColor \"$WMMENUSHADOW\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  MenuTitleBackground \"$WMMENUTITLEBG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  MenuTitleForeground \"$WMMENUTITLEFG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  IconBackground \"$WMICONBG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  IconForeground \"$WMICONFG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  IconBorderColor \"$WMBORDERICON\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  IconManagerBackground \"$WMTASKSBG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  IconManagerForeground \"$WMTASKSFG\"" >> $USERTMPFS/twm-xfreq.rc
	echo "  IconManagerHighlight \"$WMTASKSLIGHT\"" >> $USERTMPFS/twm-xfreq.rc
	echo "}" >> $USERTMPFS/twm-xfreq.rc
	echo "" >> $USERTMPFS/twm-xfreq.rc
	echo "MoveDelta 3" >> $USERTMPFS/twm-xfreq.rc
	echo "Function \"move-or-lower\" { f.move f.deltastop f.lower }" >> $USERTMPFS/twm-xfreq.rc
	echo "Function \"move-or-raise\" { f.move f.deltastop f.raise }" >> $USERTMPFS/twm-xfreq.rc
	echo "Function \"move-or-iconify\" { f.move f.deltastop f.iconify }" >> $USERTMPFS/twm-xfreq.rc
	echo "Function \"raise-and-focus\" { f.raise f.focus }" >> $USERTMPFS/twm-xfreq.rc
	echo "Function \"raise-and-move\"  { f.raise f.move }" >> $USERTMPFS/twm-xfreq.rc
	echo "Function \"raise-and-resize\"  { f.raise f.resize }" >> $USERTMPFS/twm-xfreq.rc
	echo "Function \"run-app\"" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	echo "  f.exec \"dmenu_run -b -nb '$WMRUNWINBG' -nf '$WMRUNWINFG' -sb '$WMRUNSELBG' -sf '$WMRUNSELFG'\"" >> $USERTMPFS/twm-xfreq.rc
	echo "}" >> $USERTMPFS/twm-xfreq.rc
	echo "Function \"screenshot-root\"" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	echo "  f.exec \"scrot --silent --delay 1 --exec 'xmessage -buttons Close -timeout 15 -fg \\\"$WMPOPUPFG\\\" -bg \\\"$WMPOPUPBG\\\" -bd \\\"$WMPOPUPFG\\\" -geometry -16-32 -fn $WMPOPUPFONT -name PopUp \$f &' '$USERTMPFS/%Y%m%d-%H%M%S-\$wx\$h.png'\"" >> $USERTMPFS/twm-xfreq.rc
	echo "}" >> $USERTMPFS/twm-xfreq.rc
	echo "" >> $USERTMPFS/twm-xfreq.rc
	echo "Button3 =       : root          : f.menu \"leftops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "Button2 =       : root          : f.menu \"TwmWindows\"" >> $USERTMPFS/twm-xfreq.rc
	echo "Button1 =       : root          : f.menu \"rightops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "Button4 =       : title|frame|iconmgr : f.circledown" >> $USERTMPFS/twm-xfreq.rc
	echo "Button5 =       : title|frame|iconmgr : f.circleup" >> $USERTMPFS/twm-xfreq.rc
	echo "Button1 =       : window        : f.raise" >> $USERTMPFS/twm-xfreq.rc
	echo "Button1 = m     : window|icon   : f.function \"move-or-lower\"" >> $USERTMPFS/twm-xfreq.rc
	echo "Button2 = m     : window|icon   : f.iconify" >> $USERTMPFS/twm-xfreq.rc
	echo "Button3 = m     : window|icon   : f.function \"move-or-raise\"" >> $USERTMPFS/twm-xfreq.rc
	echo "Button1 =       : title         : f.function \"move-or-raise\"" >> $USERTMPFS/twm-xfreq.rc
	echo "Button2 =       : title         : f.fullzoom" >> $USERTMPFS/twm-xfreq.rc
	echo "Button3 =       : title|iconmgr : f.menu \"winops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "Button1 =       : icon          : f.function \"move-or-iconify\"" >> $USERTMPFS/twm-xfreq.rc
	echo "Button2 =       : icon          : f.iconify" >> $USERTMPFS/twm-xfreq.rc
	echo "Button1 =       : iconmgr       : f.iconify" >> $USERTMPFS/twm-xfreq.rc
	echo "Button2 =       : iconmgr       : f.fullzoom" >> $USERTMPFS/twm-xfreq.rc
	echo "Button1 =       : frame         : f.function \"raise-and-move\"" >> $USERTMPFS/twm-xfreq.rc
	echo "Button2 =       : frame         : f.hzoom" >> $USERTMPFS/twm-xfreq.rc
	echo "Button3 =       : frame         : f.function \"raise-and-resize\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"F2\" =          : root          : f.function \"run-app\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"r\" = c         : root          : f.function \"run-app\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"p\" = c         : root          : f.function \"screenshot-root\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"t\" = c         : root          : f.exec \"exec xterm -bg '$WMTERMBG' -fg '$WMTERMFG' -name Terminal &\"" >> $USERTMPFS/twm-xfreq.rc
	echo "" >> $USERTMPFS/twm-xfreq.rc
	echo "menu \"winops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Fullzoom\"      f.fullzoom" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Iconify\"       f.iconify" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Resize\"        f.resize" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Move\"          f.move" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Raise\"         f.raise" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Lower\"         f.lower" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Focus\"         f.focus" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Unfocus\"       f.unfocus" >> $USERTMPFS/twm-xfreq.rc
	echo "\"AutoRaise\"     f.autoraise" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Kill\"          f.destroy" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Close\"         f.delete" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "}" >> $USERTMPFS/twm-xfreq.rc
	echo "menu \"sysops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Sleep\"         f.exec \"systemctl suspend\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Hibernate\"     f.exec \"systemctl hibernate\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Hybrid-sleep\"  f.exec \"systemctl hybrid-sleep\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Rescue\"        f.exec \"(xmessage -buttons Rescue:11,Cancel:99 -default Cancel -timeout 30 -fg '$WMPOPUPFG' -bg '$WMPOPUPBG' -bd '$WMPOPUPFG' -geometry -16-32 -fn '$WMPOPUPFONT' -name PopUp 'Enter rescue mode ?'; if [[ \$? == 11 ]]; then systemctl rescue; fi) &\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Reboot\"        f.exec \"(xmessage -buttons Reboot:11,Cancel:99 -default Cancel -timeout 30 -fg '$WMPOPUPFG' -bg '$WMPOPUPBG' -bd '$WMPOPUPFG' -geometry -16-32 -fn '$WMPOPUPFONT' -name PopUp 'Shut down and reboot the system ?'; if [[ \$? == 11 ]]; then systemctl reboot; fi) &\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"PowerOff\"      f.exec \"(xmessage -buttons PowerOff:11,Cancel:99 -default Cancel -timeout 30 -fg '$WMPOPUPFG' -bg '$WMPOPUPBG' -bd '$WMPOPUPFG' -geometry -16-32 -fn '$WMPOPUPFONT' -name PopUp 'Shut down and power-off the system ?'; if [[ \$? == 11 ]]; then systemctl poweroff; fi) &\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "}" >> $USERTMPFS/twm-xfreq.rc
	echo "menu \"screensaver\"" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	if [[ -v XDM_XFREQ_SCREENSAVER_CMD ]]; then
	echo "\"Modes...\"      f.exec \"$XDM_XFREQ_SCREENSAVER_CMD $XDM_XFREQ_SCREENSAVER_MODE &\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Config...\"     f.exec \"$XDM_XFREQ_SCREENSAVER_CMD $XDM_XFREQ_SCREENSAVER_PREF &\"" >> $USERTMPFS/twm-xfreq.rc
	else
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "\"    Disable  \"    f.exec \"xset s default ; xset dpms 0 0 0\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"  5 minutes  \"    f.exec \"xset s 300 300 ; xset dpms 300 300 300\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"  7 minutes  \"    f.exec \"xset s 420 420 ; xset dpms 420 420 420\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\" 10 minutes  \"    f.exec \"xset s 600 600 ; xset dpms 600 600 600\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\" 12 minutes  \"    f.exec \"xset s 720 720 ; xset dpms 720 720 720\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\" 15 minutes  \"    f.exec \"xset s 900 900 ; xset dpms 900 900 900\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\" 20 minutes  \"    f.exec \"xset s 1500 1500 ; xset dpms 1500 1500 1500\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	fi
	echo "}" >> $USERTMPFS/twm-xfreq.rc
	echo "menu \"iconmgr\"" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	echo "\"    Show    \"  f.showiconmgr" >> $USERTMPFS/twm-xfreq.rc
	echo "\"    Hide    \"  f.hideiconmgr" >> $USERTMPFS/twm-xfreq.rc
	echo "}" >> $USERTMPFS/twm-xfreq.rc
	echo "menu \"settings\"" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Icon Manager\"  f.menu \"iconmgr\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Screen Saver\"  f.menu \"screensaver\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "}" >> $USERTMPFS/twm-xfreq.rc
	echo "menu \"twmops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Restart\"       f.restart" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Quit\"          f.quit" >> $USERTMPFS/twm-xfreq.rc
	if [[ -v XDM_XFREQ_SCREENSAVER_CMD ]]; then
	echo "\"Lock\"          f.exec \"$XDM_XFREQ_SCREENSAVER_CMD $XDM_XFREQ_SCREENSAVER_LOCK\"" >> $USERTMPFS/twm-xfreq.rc
	fi
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "}" >> $USERTMPFS/twm-xfreq.rc
	echo "menu \"leftops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	echo "\"$(hostname)\"   f.title" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Window\"        f.menu \"winops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"System\"        f.menu \"sysops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Settings\"      f.menu \"settings\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Manager\"       f.menu \"twmops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "}" >> $USERTMPFS/twm-xfreq.rc
	echo "menu \"termops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "\"96x30-18px\"    f.exec \"exec xterm -bg '$WMTERMBG' -fg '$WMTERMFG' -geometry 96x30 -fn '$WMTERMBIGFONT' -name Terminal &\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"96x36-15px\"    f.exec \"exec xterm -bg '$WMTERMBG' -fg '$WMTERMFG' -geometry 96x36 -fn '$WMTERMMEDFONT' -name Terminal &\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"80x25-12px\"    f.exec \"exec xterm -bg '$WMTERMBG' -fg '$WMTERMFG' -geometry 80x25 -fn '$WMTERMSMLFONT' -name Terminal &\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "}" >> $USERTMPFS/twm-xfreq.rc
	echo "menu \"rightops\"" >> $USERTMPFS/twm-xfreq.rc
	echo "{" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Applications\"  f.title" >> $USERTMPFS/twm-xfreq.rc
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Run...\"        f.function \"run-app\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"XFreq\"         f.exec \"xfreq-gui -b $XFREQBACKGROUND -f $XFREQFOREGROUND -S $USERTMPFS &\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Clock\"         f.exec \"xclock -digital -twentyfour -update 1 -strftime '$CLOCKFORMAT' -bg '$WMCLOCKBG' -fg '$WMCLOCKFG' -geometry 175x26-0+0 -fa '$WMCLOCKFACE' -name Clock &\"" >> $USERTMPFS/twm-xfreq.rc
	echo "\"Terminal\"      f.menu \"termops\"" >> $USERTMPFS/twm-xfreq.rc
	WEBBROWSER="$(grep -w 'Exec' /usr/share/applications/$(xdg-settings get default-web-browser)|cut -d '=' -f 2)"
	if [[ $WEBBROWSER != "" ]]; then
	echo "\"Internet\"      f.exec \"$WEBBROWSER &\"" >> $USERTMPFS/twm-xfreq.rc
	fi
	echo "\"\"              f.nop" >> $USERTMPFS/twm-xfreq.rc
	echo "}" >> $USERTMPFS/twm-xfreq.rc

	if [[ -v XDM_XFREQ_SCREENSAVER_PATH ]]; then
		$XDM_XFREQ_SCREENSAVER_PATH $XDM_XFREQ_SCREENSAVER_ARGS &
	fi

	twm -f $USERTMPFS/twm-xfreq.rc
    else
	twm
    fi
fi
